<!DOCTYPE html><html><head><title>Map Search</title><meta charset=utf-8 /><meta name=viewport content="width=device-width, initial-scale=1, shrink-to-fit=no" /><link rel=stylesheet href=https://atlas.microsoft.com/sdk/javascript/mapcontrol/2/atlas.min.css type=text/css /><script src=https://atlas.microsoft.com/sdk/javascript/mapcontrol/2/atlas.min.js></script><script src=https://atlas.microsoft.com/sdk/javascript/mapcontrol/2/atlas-service.min.js></script><script>function showPopup(n){var i=n.shapes[0].getProperties(),t=n.shapes[0].getCoordinates(),r=['<div style="padding:5px"><div><b>',i.poi.name,"<\/b><\/div><div>",i.address.freeformAddress,"<\/div><div>",t[1],", ",t[0],"<\/div><\/div>"];popup.setPopupOptions({content:r.join(""),position:t});popup.open(map)}function extra(n){clickedPoi=!0;var t=n.shapes[0].getProperties(),i=n.shapes[0].getCoordinates();sendPoi({longitude:i[0],latitude:i[1],name:t.poi.name,type:t.poi.categories[0]})}function closePopup(){clickedPoi||popup.close();clickedPoi=!1}function onSend(){let t=document.getElementById("location").value;if(location!=""){var n=new XMLHttpRequest;n.onreadystatechange=function(){var i,t;this.readyState==4&&this.status==200&&(response=JSON.parse(n.responseText),latitude=response.latitude,longitude=response.longitude,zoom=response.type=="Country"?6:10,onUpdate(),i=document.getElementById("details"),i.innerText="",i.innerText+="Details:\n",t=document.createElement("LI"),t.innerText+="Name: "+response.name,i.appendChild(t),response.type!="Country"&&(t=document.createElement("LI"),t.innerText+="Country: "+response.country,i.appendChild(t)),t=document.createElement("LI"),t.innerText+="Country Code: "+response.countryCode,i.appendChild(t),t=document.createElement("LI"),t.innerText+="Location type: "+response.type,i.appendChild(t),t=document.createElement("LI"),t.innerText+="Latitude: "+response.latitude,i.appendChild(t),t=document.createElement("LI"),t.innerText+="Longitude: "+response.longitude,i.appendChild(t))};n.open("GET","https://localhost:44399/api/locations?query="+t,!0);n.send()}}function createMap(){map=new atlas.Map("map",{authOptions:{authType:"subscriptionKey",subscriptionKey:"jafHlPTWuF0LcBMgiZiU8Sp8lSCOmUjnZ9lPpST7idw"}});map.events.add("ready",function(){datasource=new atlas.source.DataSource;map.sources.add(datasource);resultLayer=new atlas.layer.SymbolLayer(datasource,null,{iconOptions:{image:"pin-round-darkblue",anchor:"center",allowOverlap:!0},textOptions:{anchor:"top"}});map.layers.add(resultLayer)});onUpdate()}function onUpdate(){let n=document.getElementById("point-of-interest").value;var r=new atlas.service.SubscriptionKeyCredential(atlas.getSubscriptionKey()),u=atlas.service.MapsURL.newPipeline(r),t=new atlas.service.SearchURL(u),i=1e4;n!=""?(t.searchPOI(atlas.service.Aborter.timeout(1e4),n,{limit:100,lat:latitude,lon:longitude,radius:i}).then(n=>{var t=n.geojson.getFeatures();datasource.clear();datasource.add(t);map.setCamera({bounds:t.bbox,padding:15});map.setCamera({zoom:zoom})}),popup=new atlas.Popup,map.events.add("mouseover",resultLayer,showPopup),map.events.add("click",resultLayer,extra),map.events.add("click",closePopup)):t.searchPOI(atlas.service.Aborter.timeout(1e4),"Church",{limit:100,lat:latitude,lon:longitude,radius:i}).then(n=>{var t=n.geojson.getFeatures();datasource.clear();map.setCamera({bounds:t.bbox,padding:15});map.setCamera({zoom:zoom})})}function sendPoi(n){var t=new XMLHttpRequest;t.onreadystatechange=function(){this.readyState==4&&this.status==200&&console.log("sent")};t.open("POST","https://localhost:44399/api/pointsofinterest?latitude="+n.latitude+"&longitude="+n.longitude+"&name="+n.name+"&type="+n.type,!0);t.send()}var map=null,latitude=0,longitude=0,zoom=1,resultLayer=null,clickedPoi=!1</script><style>html,body{width:100%;height:100%;padding:0;margin:0}#map{width:1500px;height:800px;margin-left:150px;margin-right:150px;border:2px solid #000}#title{text-align:center;font-size:150px;font-style:italic}#text{padding-top:10px;font-size:30px}#content{display:flex;justify-content:space-evenly;flex-direction:column;align-items:center;padding-top:50px}#item{margin-top:10px;font-size:20px;text-align:justify}.menu{list-style-type:none;margin:0;padding:0;overflow:hidden;background-color:#333}.menu li{float:left}.menu li a{display:block;color:#fff;text-align:center;padding:14px 16px;text-decoration:none}.menu li a:hover{background-color:#111}</style></head><body onload=createMap()><ul class=menu><li><a class=active href=/home.html>Home</a></li><li><a href=/interests.html>Your Interests</a></li></ul><div id=title>Hello there!</div><div id=content><div id=text>I will give you information about any location you want.</div><div id=text><span><b>Enter a location:</b></span><br /></div><div id=text><input type=text id=location /><input type=button value=Send onclick=onSend() /></div><div id=text><span><b>Enter a point of interest:</b></span><br /></div><div id=text><input type=text id=point-of-interest /><input type=button value=Update onclick=onUpdate() /></div><div id=item><div id=map></div></div><div id=item><ul id=details></ul></div><div id=item><ul id=imageProperties></ul></div></div></body></html>